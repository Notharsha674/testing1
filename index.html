<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kuk's Quest</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Draggable.min.js"></script>
    <style>
        :root { --p: #FFB7C5; --d: #FF4D6D; --t: #70D6FF; }
        * { margin:0; padding:0; box-sizing:border-box; font-family: sans-serif; -webkit-tap-highlight-color:transparent; }
        body { background: #fdf2f4; height:100vh; overflow:hidden; display:flex; justify-content:center; align-items:center; touch-action:none; }
        .page { text-align:center; width:90%; height:80vh; background:white; border-radius:30px; padding:20px; display:none; flex-direction:column; justify-content:space-between; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .active { display:flex; }
        .box { position:relative; width:100%; height:300px; background:#f9f9f9; border-radius:20px; overflow:hidden; }
        .btn { padding:15px; background:var(--d); color:white; border:none; border-radius:25px; font-weight:bold; width:100%; }
        .tile { width:60px; height:60px; background:white; border:2px solid var(--p); border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:bold; color:var(--d); touch-action:none; }
    </style>
</head>
<body>

    <div id="p1" class="page active">
        <h1>Happy Birthday Kuk! ü™∑</h1>
        <div style="font-size:5rem;">ü™∑</div>
        <button class="btn" onclick="go(2)">START QUEST</button>
    </div>

    <div id="p2" class="page">
        <h2>1. Bloom</h2>
        <div class="box" style="display:flex; align-items:center; justify-content:center;">
            <div id="flower" style="font-size:3rem; transition:0.1s;">üå±</div>
            <div style="font-size:4rem; margin-left:20px;" ontouchstart="sB()" ontouchend="eB()">üíß</div>
        </div>
        <p id="b-stat">0%</p>
    </div>

    <div id="p3" class="page">
        <h2>2. Catch</h2>
        <p id="c-score">Score: 0/10</p>
        <div class="box" id="c-area"><div id="bt" style="position:absolute; bottom:10px; left:50%; font-size:3rem;">ü™∑</div></div>
    </div>

    <div id="p4" class="page">
        <h2>3. Maze</h2>
        <div class="box" id="m-box">
            <div style="position:absolute; width:80%; height:10px; background:#eee; top:100px;"></div>
            <div id="m-target" style="position:absolute; bottom:10px; right:10px; font-size:2rem;">ü¶ñ</div>
            <div id="m-player" style="position:absolute; font-size:2rem;">‚ù§Ô∏è</div>
        </div>
    </div>

    <div id="p5" class="page">
        <h2>4. Pop</h2>
        <div id="d-box" class="box" style="display:grid; grid-template-columns:repeat(4,1fr); gap:10px; padding:20px;"></div>
    </div>

    <div id="p6" class="page">
        <h2>5. Spell</h2>
        <div class="box" style="display:flex; flex-direction:column; justify-content:center; gap:20px; align-items:center;">
            <div style="display:flex; gap:10px;"><div class="tile" style="border-style:dashed;"></div><div class="tile" style="border-style:dashed;"></div><div class="tile" style="border-style:dashed;"></div></div>
            <div style="display:flex; gap:10px;"><div class="tile drag">K</div><div class="tile drag">U</div><div class="tile drag">K</div></div>
        </div>
    </div>

    <div id="p7" class="page">
        <h1>HBD Kuk! üíñ</h1>
        <p>You finished it! Hope your day is amazing! üå∏</p>
        <button class="btn" onclick="location.reload()">REPLAY</button>
    </div>

    <script>
        let bV=0, bI, cS=0, cI;
        function go(n){
            document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
            document.getElementById('p'+n).classList.add('active');
            if(n===3) startC(); if(n===4) initM(); if(n===5) initP(); if(n===6) initS();
        }

        // Bloom
        function sB(){ bI=setInterval(()=>{ if(bV<100){ bV+=2; document.getElementById('b-stat').innerText=bV+'%'; document.getElementById('flower').style.transform=`scale(${1+bV/50})`; if(bV>80)document.getElementById('flower').innerText='ü™∑'; } else { clearInterval(bI); go(3); } },50); }
        function eB(){ clearInterval(bI); }

        // Catch
        function startC(){
            Draggable.create("#bt",{type:"x",bounds:"#c-area"});
            cI=setInterval(()=>{
                if(cS>=10){ clearInterval(cI); go(4); return; }
                let p=document.createElement('div'); p.innerText='üå∏'; p.style.cssText=`position:absolute; left:${Math.random()*80}%; top:-30px; font-size:1.5rem;`;
                document.getElementById('c-area').appendChild(p);
                gsap.to(p,{y:330,duration:2,onUpdate:function(){
                    let bR=document.getElementById('bt').getBoundingClientRect(), pR=p.getBoundingClientRect();
                    if(!(pR.right<bR.left||pR.left>bR.right||pR.bottom<bR.top||pR.top>bR.bottom)){ cS++; document.getElementById('c-score').innerText=`Score: ${cS}/10`; p.remove(); this.kill(); }
                },onComplete:()=>p.remove()});
            },800);
        }

        // Maze
        function initM(){ Draggable.create("#m-player",{type:"x,y",bounds:"#m-box",onDrag:function(){ if(this.hitTest("#m-target","50%")){ this.disable(); go(5); }}}); }

        // Pop
        function initP(){ let box=document.getElementById('d-box'), pD=0; for(let i=0;i<12;i++){ let d=document.createElement('div'); d.style.cssText="background:var(--t); border-radius:50%; opacity:0.6;"; d.onclick=function(){ this.style.visibility='hidden'; pD++; if(pD===12)go(6); }; box.appendChild(d); }}

        // Scramble
        function initS(){ Draggable.create(".drag",{bounds:"body",onRelease:function(){ if(this.y<-100){ this.target.style.opacity='0.5'; if(document.querySelectorAll('.drag[style*="opacity: 0.5"]').length===3)go(7); } else { gsap.to(this.target,{x:0,y:0}); }}}); }
    </script>
</body>
</html>
