<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kuk's Lotus Quest!</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Draggable.min.js"></script>
    <style>
        :root { --lotus-pink: #FFB7C5; --water-teal: #70D6FF; --leaf-green: #95D5B2; --deep-pink: #FF4D6D; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; -webkit-tap-highlight-color: transparent; }
        
        body {
            background: linear-gradient(180deg, #E0F2F1 0%, #FCE4EC 100%);
            height: 100vh; overflow: hidden; display: flex;
            justify-content: center; align-items: center; touch-action: none;
        }

        .container {
            text-align: center; z-index: 10; padding: 1.5rem;
            width: 92%; max-width: 400px; height: 85vh;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 40px; backdrop-filter: blur(15px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.05);
            border: 2px solid white;
            display: none; flex-direction: column; align-items: center; justify-content: space-between;
        }

        .active-page { display: flex; animation: fadeIn 0.6s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        h1 { font-size: 1.8rem; color: var(--deep-pink); letter-spacing: -1px; }
        .subtitle { color: #666; font-size: 0.9rem; margin-top: 5px; }

        .btn {
            padding: 1.2rem 2.5rem; font-size: 1.1rem; font-weight: bold;
            background: linear-gradient(45deg, var(--lotus-pink), var(--deep-pink));
            color: white; border: none; border-radius: 30px;
            box-shadow: 0 10px 20px rgba(255, 77, 109, 0.2);
            cursor: pointer; width: 100%; transition: 0.3s;
        }

        .game-box { 
            position: relative; width: 100%; height: 320px; 
            background: rgba(255,255,255,0.4); border-radius: 30px; 
            overflow: hidden; border: 1px solid rgba(255,255,255,0.5);
        }

        /* Bloom Game */
        #lotus-bud { font-size: 2rem; transition: 0.1s; display: inline-block; }
        #water-meter { width: 10px; height: 100px; background: #eee; border-radius: 10px; position: relative; overflow: hidden; margin-left: 20px; }
        #water-fill { position: absolute; bottom: 0; width: 100%; height: 0%; background: var(--water-teal); }

        /* Petal Catch */
        #basket { position: absolute; bottom: 10px; left: 50%; font-size: 3.5rem; transform: translateX(-50%); touch-action: none; z-index: 20; }
        .petal { position: absolute; font-size: 1.5rem; pointer-events: none; }

        /* Maze */
        .pad { position: absolute; background: var(--leaf-green); border-radius: 50%; opacity: 0.6; }
        #maze-player { position: absolute; font-size: 2rem; z-index: 30; cursor: grab; }

        /* Scramble */
        .flower-tile { width: 70px; height: 70px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; color: var(--deep-pink); border: 3px solid var(--lotus-pink); touch-action: none; }

        #mascot-container { position: fixed; bottom: 15px; left: 15px; z-index: 1000; display: none; }
        #mascot { width: 60px; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.1)); }
    </style>
</head>
<body>

    <audio id="bg-music" loop src="Yellow.mp3"></audio>

    <div id="p1" class="container active-page">
        <div>
            <h1>Kuk's Lotus Quest</h1>
            <p class="subtitle">A peaceful birthday adventure ü™∑</p>
        </div>
        <div style="font-size: 5rem; animation: float 3s infinite ease-in-out;">ü™∑</div>
        <button class="btn" onclick="nextPage(2)">START JOURNEY ‚ú®</button>
    </div>

    <div id="p2" class="container">
        <h1>1. Bloom the Lotus</h1>
        <p class="subtitle">HOLD the water droplet to help it grow!</p>
        <div class="game-box" style="display:flex; align-items:center; justify-content:center;">
            <div id="lotus-bud">üå±</div>
            <div id="water-meter"><div id="water-fill"></div></div>
            <div style="font-size: 4rem; margin-left: 20px; cursor:pointer;" ontouchstart="startBloom()" ontouchend="stopBloom()">üíß</div>
        </div>
        <p id="bloom-status" style="font-weight:bold; color:var(--water-teal);">Hydration: 0%</p>
    </div>

    <div id="p3" class="container">
        <h1>2. Petal Harvest</h1>
        <p id="catch-score" class="subtitle">Collect 10 petals! (0/10)</p>
        <div class="game-box" id="catch-area">
            <div id="basket">ü™∑</div>
        </div>
    </div>

    <div id="p4" class="container">
        <h1>3. Lily Pad Path</h1>
        <p class="subtitle">Guide the heart to the ü¶ñ!</p>
        <div class="game-box" id="maze-container">
            <div class="pad" style="width: 100px; height: 100px; top: 10px; left: 10px;"></div>
            <div class="pad" style="width: 120px; height: 120px; bottom: 10px; right: 10px;"></div>
            <div id="maze-target" style="position:absolute; bottom:25px; right:35px; font-size:2rem;">ü¶ñ</div>
            <div id="maze-player">‚ù§Ô∏è</div>
        </div>
    </div>

    <div id="p5" class="container">
        <h1>4. Dew Drop Pop</h1>
        <p class="subtitle">Pop all 12 drops to clear the leaf!</p>
        <div id="drop-box" class="game-box" style="display:grid; grid-template-columns: repeat(4, 1fr); gap:12px; padding:20px; align-content:center;"></div>
    </div>

    <div id="p6" class="container">
        <h1>5. Lotus Secret</h1>
        <p class="subtitle">Drag the petals to spell KUK!</p>
        <div class="game-box" style="display:flex; flex-direction:column; justify-content:center; gap:30px;">
            <div style="display:flex; gap:15px; justify-content:center;">
                <div class="flower-tile" style="border-style:dashed; background:none;"></div>
                <div class="flower-tile" style="border-style:dashed; background:none;"></div>
                <div class="flower-tile" style="border-style:dashed; background:none;"></div>
            </div>
            <div style="display:flex; gap:15px; justify-content:center;">
                <div class="flower-tile drag-petal">K</div>
                <div class="flower-tile drag-petal">U</div>
                <div class="flower-tile drag-petal">K</div>
            </div>
        </div>
    </div>

    <div id="p7" class="container">
        <h1>Happy Birthday, Kuk! ü™∑</h1>
        <p style="padding:15px; line-height:1.6; color:#555;">
            The lotus represents purity and strength, just like you. I hope your day is as beautiful and peaceful as this pond. You are truly special! üíñ
        </p>
        <button class="btn" onclick="location.reload()">REPLAY üåø</button>
    </div>

    <div id="mascot-container">
        <img id="mascot" src="dino.jpg">
    </div>

    <script>
        let bloomVal = 0;
        let bloomInterval;
        let petalsCaught = 0;
        let catchInterval;

        function nextPage(n) {
            document.querySelectorAll('.container').forEach(c => c.classList.remove('active-page'));
            document.getElementById('p'+n).classList.add('active-page');
            if(n===2) {
                document.getElementById('bg-music').play();
                document.getElementById('mascot-container').style.display = 'block';
            }
            if(n===3) startPetalGame();
            if(n===4) initMaze();
            if(n===5) initDrops();
            if(n===6) initScramble();
        }

        // GAME 1: Bloom
        function startBloom() {
            bloomInterval = setInterval(() => {
                if(bloomVal < 100) {
                    bloomVal += 2;
                    document.getElementById('water-fill').style.height = bloomVal + '%';
                    document.getElementById('bloom-status').innerText = `Hydration: ${bloomVal}%`;
                    let scale = 1 + (bloomVal/50);
                    document.getElementById('lotus-bud').style.transform = `scale(${scale})`;
                    if(bloomVal > 40) document.getElementById('lotus-bud').innerText = 'üå∑';
                    if(bloomVal > 80) document.getElementById('lotus-bud').innerText = 'ü™∑';
                } else {
                    stopBloom(); nextPage(3);
                }
            }, 50);
        }
        function stopBloom() { clearInterval(bloomInterval); }

        // GAME 2: Petal Catch
        function startPetalGame() {
            const catcher = document.getElementById('basket');
            Draggable.create(catcher, { type: "x", bounds: "#catch-area" });

            catchInterval = setInterval(() => {
                if(petalsCaught >= 10) { clearInterval(catchInterval); nextPage(4); return; }
                const area = document.getElementById('catch-area');
                const p = document.createElement('div');
                p.className = 'petal';
                p.innerText = ['üå∏','üíÆ','‚ú®'][Math.floor(Math.random()*3)];
                p.style.left = Math.random() * (area.offsetWidth - 30) + 'px';
                p.style.top = '-40px';
                area.appendChild(p);

                gsap.to(p, {
                    y: 350, duration: 2.5, ease: "none",
                    onUpdate: function() {
                        const bRect = catcher.getBoundingClientRect();
                        const pRect = p.getBoundingClientRect();
                        if(!(pRect.right < bRect.left || pRect.left > bRect.right || pRect.bottom < bRect.top || pRect.top > bRect.bottom)) {
                            petalsCaught++;
                            document.getElementById('catch-score').innerText = `Collect 10 petals! (${petalsCaught}/10)`;
                            p.remove(); this.kill();
                        }
                    },
                    onComplete: () => p.remove()
                });
            }, 800);
        }

        // GAME 3: Maze
        function initMaze() {
            Draggable.create("#maze-player", {
                type: "x,y", bounds: "#maze-container",
                onDrag: function() {
                    if(this.hitTest("#maze-target", "50%")) { this.disable(); nextPage(5); }
                }
            });
        }

        // GAME 4: Drops
        function initDrops() {
            const box = document.getElementById('drop-box');
            let popped = 0;
            for(let i=0; i<12; i++) {
                const d = document.createElement('div');
                d.style.cssText = "width:50px; height:50px; background:rgba(112,214,255,0.6); border-radius:50%; border:2px solid white; box-shadow:inset -5px -5px 10px rgba(0,0,0,0.1);";
                d.onclick = function() {
                    gsap.to(this, {scale:0, opacity:0, duration:0.3});
                    popped++;
                    if(popped === 12) nextPage(6);
                };
                box.appendChild(d);
            }
        }

        // GAME 5: Scramble
        function initScramble() {
            Draggable.create(".drag-petal", {
                bounds: "body",
                onRelease: function() {
                    if(this.y < -100) {
                        gsap.to(this.target, {scale:0.8, opacity:0.6});
                        if(document.querySelectorAll('.drag-petal[style*="opacity: 0.6"]').length === 3) {
                            setTimeout(() => nextPage(7), 800);
                        }
                    } else {
                        gsap.to(this.target, {x:0, y:0, duration:0.3});
                    }
                }
            });
        }
    </script>

    <style>
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
    </style>
</body>
</html>
