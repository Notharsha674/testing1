<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuk's Birthday Quest!</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Comic Sans MS', cursive, sans-serif; }
        
        body {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            min-height: 100vh;
            overflow-x: hidden;
            scroll-behavior: smooth; /* Smooth scrolling between steps */
        }

        /* Each step is now its own full-screen section */
        .page-section {
            min-height: 100vh;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            text-align: center;
            border-bottom: 2px dashed rgba(255, 255, 255, 0.3);
            position: relative;
        }

        /* Hiding sections initially until unlocked to keep it a "Quest" */
        .container {
            background-color: rgba(255, 255, 255, 0.25);
            border-radius: 25px;
            backdrop-filter: blur(10px);
            padding: 25px;
            width: 100%;
            max-width: 400px; /* Perfect for mobile */
            box-shadow: 0 8px 32px rgba(255, 105, 180, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            display: none; /* Initially hidden */
        }

        .show-container { display: block; animation: fadeInUp 0.5s ease forwards; }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 { font-size: 1.8rem; color: #FF1493; margin-bottom: 10px; }
        .subtitle { color: #8A2BE2; margin-bottom: 15px; font-size: 0.9rem; font-weight: bold; }

        .next-button {
            padding: 12px 30px;
            font-size: 1.1rem;
            background: linear-gradient(45deg, #FF1493, #8A2BE2);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 15px;
            width: 80%;
        }

        .game-canvas { position: relative; width: 100%; height: 200px; background: rgba(255,255,255,0.2); border-radius: 15px; margin: 10px 0; overflow: hidden; }
        .hunt-item { position: absolute; font-size: 2rem; cursor: pointer; }

        .progress-container { width: 100%; background: #eee; border-radius: 20px; height: 20px; margin: 10px 0; overflow: hidden; }
        .progress-bar { height: 100%; width: 0%; background: linear-gradient(90deg, #FF1493, #FFA500); transition: 0.2s; }

        .poem-text { font-size: 0.95rem; color: #4b0082; line-height: 1.6; }
        .letter-img { width: 100%; border-radius: 15px; border: 4px solid white; margin-top: 10px; }

        /* Mascot UI stays fixed in corner */
        #mascot-container { position: fixed; bottom: 10px; left: 10px; z-index: 1000; display: none; pointer-events: none; }
        #mascot { width: 60px; border-radius: 10px; border: 2px solid white; pointer-events: auto; }
        #speech-bubble {
            position: absolute; bottom: 75px; left: 0; width: 150px; 
            background: white; padding: 8px; border-radius: 12px;
            font-size: 0.75rem; color: #333; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            display: none; font-weight: bold;
        }

        .floating { position: fixed; pointer-events: none; z-index: 1; }
    </style>
</head>
<body>

    <audio id="birthday-song" loop src="Yellow.mp3"></audio>
    <audio id="baby-song" src="baby_you.mp3"></audio>

    <section id="sec1" class="page-section">
        <div id="page1" class="container show-container">
            <h1>Happy Birthday, Kuk! üéÇ</h1>
            <p class="subtitle">Scroll down for your 10-step quest.</p>
            <button class="next-button" onclick="unlockNext(2)">Start Quest ü¶ñ</button>
        </div>
    </section>

    <section id="sec2" class="page-section">
        <div id="page2" class="container">
            <h1>Step 1: Volleyball</h1>
            <p class="subtitle">Tap the ball 5 times!</p>
            <div id="vball-score" style="font-size: 1.2rem; color: #FF1493;">0 / 5</div>
            <img id="vball" src="https://img.icons8.com/color/150/volleyball.png" style="width:80px; cursor:pointer;" onclick="hitBall()">
        </div>
    </section>

    <section id="sec3" class="page-section">
        <div id="page3" class="container">
            <h1>Step 2: The Wish</h1>
            <p class="subtitle">Tap to blow the candles!</p>
            <div style="font-size: 3rem; display: flex; justify-content: center; gap: 10px;">
                <span onclick="blow(this)" class="can">üïØÔ∏è</span>
                <span onclick="blow(this)" class="can">üïØÔ∏è</span>
                <span onclick="blow(this)" class="can">üïØÔ∏è</span>
            </div>
            <div style="font-size: 4rem;">üéÇ</div>
        </div>
    </section>

    <section id="sec4" class="page-section">
        <div id="page4" class="container">
            <h1>Step 3: Orange Tree</h1>
            <p class="subtitle">Tap the tree to grow oranges!</p>
            <div onclick="growTree()" style="font-size: 6rem; cursor:pointer;">üå≥<div id="blooms"></div></div>
            <p id="tree-count">Oranges: 0 / 6</p>
        </div>
    </section>

    <section id="sec5" class="page-section">
        <div id="page5" class="container">
            <h1>Step 4: Find the Heart</h1>
            <p class="subtitle">Find the sparkly red heart!</p>
            <div class="game-canvas" id="heart-canvas"></div>
        </div>
    </section>

    <section id="sec6" class="page-section">
        <div id="page6" class="container">
            <h1>Step 5: Balloon Pop</h1>
            <p class="subtitle">Pop 5 balloons!</p>
            <div class="game-canvas" id="balloon-canvas"></div>
            <div id="pop-score">Popped: 0 / 5</div>
        </div>
    </section>

    <section id="sec7" class="page-section">
        <div id="page7" class="container">
            <h1>Step 6: Feed Dino</h1>
            <p class="subtitle">Click the orange to feed him!</p>
            <div style="font-size: 4rem; cursor:pointer;" onclick="feedDino()">üçä</div>
        </div>
    </section>

    <section id="sec8" class="page-section">
        <div id="page8" class="container">
            <h1>Step 7: Energy Bar</h1>
            <p class="subtitle">Tap fast to fill the bar!</p>
            <div class="progress-container"><div id="energy-bar" class="progress-bar"></div></div>
            <button class="next-button" onclick="fillEnergy()">TAP! ‚ö°</button>
        </div>
    </section>

    <section id="sec9" class="page-section">
        <div id="page9" class="container">
            <h1>Step 8: Break Gift</h1>
            <p class="subtitle">Tap the box to open!</p>
            <div id="gift" onclick="tapGift()" style="font-size: 5rem; cursor:pointer;">üéÅ</div>
            <div class="progress-container"><div id="gift-bar" class="progress-bar"></div></div>
        </div>
    </section>

    <section id="sec10" class="page-section">
        <div id="page10" class="container">
            <h1>For the best person üå∏</h1>
            <div class="poem-text">
                Finally, your birthday is here! <br><br>
                Honestly, I am so happy to have you in my life.
                You are a very special person and you deserve the best.
                I always notice the small things you like,
                and I'm always here to support you in whatever you do.<br><br>
                Keep shining like the superstar you are.
                I hope this year brings you so much success and happiness.
                Don't ever change, because you are perfect just the way you are.
            </div>
            <button class="next-button" onclick="unlockNext(11)">Open Letter ‚ù§Ô∏è</button>
        </div>
    </section>

    <section id="sec11" class="page-section">
        <div id="page11" class="container">
            <button class="next-button" style="background: #8A2BE2; margin-bottom: 10px; width: 100%;" onclick="dinoRequest()">Ash has a request... ü¶ñ</button>
            <h1>Happy Birthday!</h1>
            <img src="letter_image.jpg" class="letter-img">
            <p style="margin-top: 15px; color: #d10069; font-weight: bold; font-size: 0.8rem;">‚ú® This is for your eyes only, Kuk.</p>
        </div>
    </section>

    <div id="mascot-container">
        <div id="speech-bubble">Hello Kuk!</div>
        <img id="mascot" src="dino.jpg" onclick="closeDino()">
    </div>

    <script>
        let hits=0, candles=0, oranges=0, popped=0, energy=0, gift=0;
        const yellow = document.getElementById('birthday-song');
        const baby = document.getElementById('baby-song');
        const bubble = document.getElementById('speech-bubble');

        function unlockNext(n) {
            const nextCont = document.getElementById('page' + n);
            nextCont.classList.add('show-container');
            document.getElementById('sec' + n).scrollIntoView({ behavior: 'smooth' });
            if(n===5) initHearts();
            if(n===6) initBalloons();
            updateMascot(n);
        }

        function startSurprise() {
            yellow.play();
            document.getElementById('mascot-container').style.display = 'block';
            bubble.style.display = 'block';
            unlockNext(2);
            createFloating();
        }

        function hitBall() { hits++; document.getElementById('vball-score').innerText = hits + " / 5"; if(hits===5) unlockNext(3); }
        function blow(el) { el.style.opacity = "0.2"; candles++; if(candles===3) unlockNext(4); }
        function growTree() { oranges++; document.getElementById('tree-count').innerText = "Oranges: "+oranges+" / 6"; if(oranges===6) unlockNext(5); }
        
        function initHearts() {
            const c = document.getElementById('heart-canvas'); c.innerHTML='';
            for(let i=0; i<10; i++) {
                const h = document.createElement('div'); h.className='hunt-item'; h.innerText='üñ§';
                h.style.left = Math.random()*80+'%'; h.style.top = Math.random()*70+'%';
                if(i===3) { h.innerText='‚ù§Ô∏è'; h.onclick=()=>unlockNext(6); }
                else h.onclick=()=>h.style.opacity='0.2';
                c.appendChild(h);
            }
        }

        function initBalloons() {
            const c = document.getElementById('balloon-canvas'); c.innerHTML='';
            for(let i=0; i<6; i++) {
                const b = document.createElement('div'); b.className='hunt-item'; b.innerText='üéà';
                b.style.left = Math.random()*80+'%'; b.style.top = '150px';
                c.appendChild(b);
                gsap.to(b, { y: -200, duration: 3, repeat: -1, delay: i*0.5 });
                b.onclick = () => { b.innerText='üí•'; popped++; if(popped===5) unlockNext(7); setTimeout(()=>b.remove(), 200); };
            }
        }

        function feedDino() { gsap.to("#mascot", {scale:1.5, repeat:1, yoyo:true}); bubble.innerText="YUMMY!"; setTimeout(()=>unlockNext(8), 1000); }
        function fillEnergy() { energy+=15; document.getElementById('energy-bar').style.width=energy+'%'; if(energy>=100) unlockNext(9); }
        function tapGift() { gift+=20; document.getElementById('gift-bar').style.width=gift+'%'; if(gift>=100) unlockNext(10); }

        function dinoRequest() {
            yellow.pause(); baby.play();
            const mc = document.getElementById('mascot-container');
            mc.style.pointerEvents = 'auto';
            gsap.to(mc, { left:'50%', bottom:'50%', xPercent:-50, yPercent:50, scale:2.5, duration:1 });
            bubble.style.width = '200px'; bubble.style.bottom = '100px';
            bubble.innerHTML = `Kuk, birthday tax! üé§ <br> I want a song sang by you! <br><br> <span style="font-size:0.6rem; font-weight:normal;">(I want to hear what I heard the first time baby... u remember? ignore if u want lol)</span> <br> <button onclick="closeDino()" style="background:#FF1493; color:white; border:none; border-radius:5px; padding:3px 8px; margin-top:5px;">Okay!</button>`;
        }

        function closeDino() {
            baby.pause(); baby.currentTime=0; yellow.play();
            const mc = document.getElementById('mascot-container');
            gsap.to(mc, { left:'10px', bottom:'10px', xPercent:0, yPercent:0, scale:1, duration:1 });
            bubble.style.width = '150px'; bubble.innerHTML = "Happy Birthday!";
        }

        function updateMascot(n) {
            const m = ["", "", "Keep going!", "Blow 'em!", "Mmm oranges!", "Find it!", "Pop pop!", "Feed me!", "Tap tap!", "Open it!", "For you!", "Special ask!"];
            bubble.innerText = m[n] || "Almost there!";
        }

        function createFloating() {
            const syms = ['‚ú®', 'üçä', '‚ù§Ô∏è'];
            for(let i=0; i<15; i++) {
                const e = document.createElement('div'); e.className='floating'; e.innerText=syms[i%3];
                e.style.left=Math.random()*100+"vw"; e.style.top="-50px"; document.body.appendChild(e);
                gsap.to(e, {y:window.innerHeight+100, duration:Math.random()*5+5, repeat:-1, delay:Math.random()*5});
            }
        }
        
        // Custom start for mobile audio click requirement
        window.onclick = function() { if(yellow.paused && energy === 0) startSurprise(); }
    </script>
</body>
</html>
